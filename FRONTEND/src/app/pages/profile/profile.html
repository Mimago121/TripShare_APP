<div class="page-layout">
  <app-navbar></app-navbar>

  <main class="main-content">
    
    <div class="profile-card fade-in">
      
      <div class="profile-cover">
        <img src="https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?q=80&w=2000" alt="Cover" class="cover-img">
        <button class="btn-edit-cover">ğŸ“· Cambiar portada</button>
      </div>

      <div class="profile-header-content">
        <div class="avatar-wrapper">
          <img [src]="user.avatarUrl" alt="Profile" class="avatar-img">
        </div>

        <div class="user-details">
          <div class="name-row">
            <h1>{{ user.userName }} <span class="badge-pro">PRO</span></h1>
            <button class="btn-edit-profile" (click)="openEditModal()">âœï¸ Editar perfil</button>
          </div>
          <p class="user-handle">@{{ user.userName | lowercase }} â€¢ Unido en 2024</p>
          <p class="user-bio">{{ user.bio || 'Sin biografÃ­a aÃºn. Â¡Escribe algo sobre ti!' }}</p>
          
          <div class="location-row" *ngIf="user.location">
            ğŸ“ {{ user.location }}
          </div>
        </div>
      </div>

      <div class="profile-stats">
        <div class="stat-item">
          <span class="stat-num">{{ stats.countries }}</span>
          <span class="stat-label">PaÃ­ses</span>
        </div>
        <div class="stat-item">
          <span class="stat-num">{{ stats.trips }}</span>
          <span class="stat-label">Viajes</span>
        </div>
        <div class="stat-item">
          <span class="stat-num">{{ stats.followers }}</span>
          <span class="stat-label">Seguidores</span>
        </div>
      </div>

      <div class="profile-tabs">
        <button class="tab-link" [class.active]="activeTab === 'trips'" (click)="setActiveTab('trips')">Mis Viajes</button>
        <button class="tab-link" [class.active]="activeTab === 'photos'" (click)="setActiveTab('photos')">Fotos</button>
        <button class="tab-link" [class.active]="activeTab === 'map'" (click)="setActiveTab('map')">Mapa Mundial</button>
      </div>
    </div>

    <section class="profile-body fade-in" *ngIf="activeTab === 'trips'">
      <div class="trips-grid">
        
        <div class="trip-card create-new" routerLink="/trips">
          <div class="plus-circle">+</div>
          <h3>Planear nuevo viaje</h3>
        </div>

        <div class="trip-card" *ngFor="let trip of myTrips">
          <div class="card-img-wrapper">
            <img [src]="trip.image" [alt]="trip.title">
            <span class="trip-date">{{ trip.date }}</span>
          </div>
          <div class="card-info">
            <h3>{{ trip.title }}</h3>
            <div class="card-meta">
              <span>âœˆï¸ 2 Destinos</span>
              <span>ğŸ‘¥ 3 Amigos</span>
            </div>
          </div>
        </div>

      </div>
    </section>

    <div class="empty-tab" *ngIf="activeTab !== 'trips'">
      <p>ğŸš§ Esta secciÃ³n estÃ¡ en construcciÃ³n.</p>
    </div>

  </main>

  <app-footer></app-footer>

  <div class="modal-overlay" *ngIf="isEditModalOpen" (click)="closeEditModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Editar Perfil</h2>
        <button class="btn-close" (click)="closeEditModal()">âœ•</button>
      </div>
      
      <div class="form-group">
        <label>Foto de Perfil (URL)</label>
        <input type="text" [(ngModel)]="user.avatarUrl" placeholder="https://...">
      </div>
      <div class="form-group">
        <label>Nombre de Usuario</label>
        <input type="text" [(ngModel)]="user.userName">
      </div>
      <div class="form-group">
        <label>BiografÃ­a</label>
        <textarea [(ngModel)]="user.bio" rows="3"></textarea>
      </div>

      <div class="modal-actions">
        <button class="btn-cancel" (click)="closeEditModal()">Cancelar</button>
        <button class="btn-save" (click)="saveProfile()">Guardar Cambios</button>
      </div>
    </div>
  </div>
</div>