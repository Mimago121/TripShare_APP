<app-navbar></app-navbar>

<div class="friends-container fade-in">
  
  <div class="friends-header">
    
    <div class="tabs">
      <button 
        [class.active]="activeTab === 'my-friends'" 
        (click)="setTab('my-friends')">
        Mis Amigos ({{ myFriends.length }})
      </button>
      <button 
        [class.active]="activeTab === 'explore'" 
        (click)="setTab('explore')">
        Explorar
      </button>
    </div>
  </div>

  <div *ngIf="activeTab === 'my-friends'" class="tab-content">
    <div *ngIf="myFriends.length === 0" class="empty-state">
      <p>AÃºn no tienes amigos. Â¡Ve a la pestaÃ±a Explorar!</p>
    </div>

    <div class="users-grid">
      <div class="user-card friend-card" *ngFor="let friend of myFriends">
        <img [src]="friend.avatarUrl || 'https://cdn-icons-png.flaticon.com/512/149/149071.png'" alt="Avatar">
        <div class="user-info">
          <h3>{{ friend.userName }}</h3>
          <p class="friend-badge">âœ… Agregado</p>
        </div>
        <button class="btn-chat">ðŸ’¬ Chat</button> </div>
    </div>
  </div>

  <div *ngIf="activeTab === 'explore'" class="tab-content">
    
    <div class="search-bar">
      <input type="text" placeholder="Buscar personas..." [(ngModel)]="searchTerm" (input)="filterUsers()">
    </div>

    <div *ngIf="isLoading" class="loading">Cargando usuarios...</div>

    <div class="users-grid" *ngIf="!isLoading">
      <div class="user-card" *ngFor="let user of filteredExplore">
        <img [src]="user.avatarUrl || 'https://cdn-icons-png.flaticon.com/512/149/149071.png'" alt="Avatar">
        <div class="user-info">
          <h3>{{ user.userName }}</h3>
          <p *ngIf="user.bio">{{ user.bio }}</p>
        </div>
        
        <button 
          class="btn-add" 
          [disabled]="user.requestStatus === 'pending'"
          [class.pending]="user.requestStatus === 'pending'"
          (click)="sendRequest(user)">
          {{ user.requestStatus === 'pending' ? 'Pendiente ðŸ•’' : 'AÃ±adir âž•' }}
        </button>
      </div>
    </div>
  </div>

</div>
<app-footer></app-footer>