<section style="max-width: 900px; margin: 24px auto; padding: 0 16px;">
  <header style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
    <h2 style="margin:0;">Mis viajes</h2>
    <button (click)="openCreate()" style="padding:8px 12px; cursor:pointer;">
      + Crear viaje
    </button>
  </header>

  <div *ngIf="loading" style="margin-top: 12px;">Cargando...</div>

  <div *ngIf="error" style="margin-top: 12px; padding: 10px; background:#ffe5e5;">
    {{ error }}
  </div>

  <div *ngIf="!loading && trips.length === 0" style="margin-top: 12px; opacity: .8;">
    No tienes viajes todavía.
  </div>

  <ul style="list-style:none; padding:0; margin-top: 12px;">
    <li *ngFor="let t of trips; trackBy: trackById"
        style="border:1px solid #ddd; border-radius:10px; padding:12px; margin-bottom:10px;">
      <div style="display:flex; justify-content:space-between; gap:12px; align-items:flex-start;">
        <div>
          <div style="font-weight:600;">{{ t.name }}</div>
          <div style="opacity:.85;">
            {{ t.destination }} · {{ t.startDate }} → {{ t.endDate }}
          </div>
          <div style="margin-top:6px;">
            <a [routerLink]="['/trips', t.id]" style="text-decoration:underline;">Ver detalle</a>
          </div>
        </div>

        <button (click)="deleteTrip(t.id)"
                style="padding:6px 10px; cursor:pointer;">
          Borrar
        </button>
      </div>
    </li>
  </ul>

  <!-- MODAL CREAR -->
  <div *ngIf="isCreateOpen"
       (click)="closeCreate()"
       style="position:fixed; inset:0; background:rgba(0,0,0,.4); display:flex; align-items:center; justify-content:center; padding:16px;">
    <div (click)="$event.stopPropagation()"
         style="width: min(520px, 100%); background:white; border-radius:12px; padding:16px;">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 style="margin:0;">Crear viaje</h3>
        <button (click)="closeCreate()" [disabled]="submitting" style="cursor:pointer;">✕</button>
      </div>

      <form [formGroup]="tripForm" (ngSubmit)="createTrip()" style="margin-top:12px; display:grid; gap:10px;">
        <div>
          <label>Nombre</label>
          <input formControlName="name" placeholder="Ej: Roma 2026" style="width:100%; padding:8px;">
          <small *ngIf="tripForm.get('name')?.touched && tripForm.get('name')?.invalid" style="color:#b00020;">
            El nombre es obligatorio (mín 2).
          </small>
        </div>

        <div>
          <label>Destino</label>
          <input formControlName="destination" placeholder="Ej: Roma" style="width:100%; padding:8px;">
          <small *ngIf="tripForm.get('destination')?.touched && tripForm.get('destination')?.invalid" style="color:#b00020;">
            El destino es obligatorio (mín 2).
          </small>
        </div>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
          <div>
            <label>Inicio</label>
            <input type="date" formControlName="startDate" style="width:100%; padding:8px;">
          </div>

          <div>
            <label>Fin</label>
            <input type="date" formControlName="endDate" style="width:100%; padding:8px;">
          </div>
        </div>

        <button type="submit" [disabled]="submitting" style="padding:10px 12px; cursor:pointer;">
          {{ submitting ? 'Creando...' : 'Crear' }}
        </button>
      </form>
    </div>
  </div>
</section>
