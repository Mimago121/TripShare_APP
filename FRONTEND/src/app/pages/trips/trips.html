<app-navbar></app-navbar>

<div class="trips-container">
  
  <div class="trips-header">
    <div class="header-titles">
      <h1>Mis Viajes âœˆï¸</h1>
      <p>Gestiona tus prÃ³ximas aventuras y destinos</p>
    </div>
    <button class="btn-primary" (click)="openCreateModal()">
      + Nuevo Viaje
    </button>
  </div>

  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando tus viajes...</p>
  </div>

  <div class="trips-grid" *ngIf="!isLoading">
    
    <div *ngFor="let trip of trips" class="trip-card" (click)="goToDetail(trip.id)">
      
      <div class="trip-card-img">
        
        <img *ngIf="trip.imageUrl" 
             [src]="trip.imageUrl" 
             alt="{{ trip.name }}"
             (error)="trip.imageUrl == null"> <div *ngIf="!trip.imageUrl" class="no-image-placeholder">
          <span class="placeholder-icon">ğŸ—ºï¸</span>
        </div>

        <span class="card-badge-dest">ğŸ“ {{ trip.destination }}</span>
      </div>
      
      <div class="trip-card-body">
        <h3>{{ trip.name }}</h3>
        
        <div class="trip-dates">
          <span class="date-icon">ğŸ“…</span>
          <span>{{ trip.startDate | date:'d MMM' }} - {{ trip.endDate | date:'d MMM y' }}</span>
        </div>
      </div>

      <div class="trip-card-footer">
        <button class="btn-outline-small full-width">Ver detalles</button>
      </div>
    </div>

    <div *ngIf="trips.length === 0 && !isLoading" class="empty-state">
      <div class="empty-icon">ğŸŒ</div>
      <h3>Â¡Tu pasaporte estÃ¡ vacÃ­o!</h3>
      <p>AÃºn no has creado ningÃºn viaje. Â¡Empieza tu primera aventura ahora!</p>
    </div>

  </div>
</div>

<div class="modal-overlay" *ngIf="showCreateModal" (click)="closeCreateModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeCreateModal()">âœ•</button>
    
    <div class="modal-header">
      <h2>Planear Nuevo Viaje ğŸŒ</h2>
    </div>
    
    <div class="modal-body">
      
      <div class="form-group">
        <label>Nombre del Viaje *</label>
        <input type="text" [(ngModel)]="newTrip.name" class="custom-input" placeholder="Ej: Verano en Grecia">
      </div>

      <div class="form-group">
        <label>Destino *</label>
        <input type="text" [(ngModel)]="newTrip.destination" class="custom-input" placeholder="Ej: Atenas">
      </div>

      <div class="form-row">
        <div class="form-group half">
          <label>Fecha Inicio</label>
          <input type="date" [(ngModel)]="newTrip.startDate" class="custom-input">
        </div>
        <div class="form-group half">
          <label>Fecha Fin</label>
          <input type="date" [(ngModel)]="newTrip.endDate" class="custom-input">
        </div>
      </div>

      <div class="form-group">
        <label>Foto de Portada (URL Opcional)</label>
        <input type="text" 
               [(ngModel)]="newTrip.imageUrl" 
               class="custom-input" 
               placeholder="Pega aquÃ­ un enlace de imagen (http...)">
        <small style="color: #666; font-size: 0.8rem;">Si lo dejas vacÃ­o, usaremos un diseÃ±o por defecto.</small>
      </div>

    </div>

    <div class="modal-actions">
      <button class="btn-cancel" (click)="closeCreateModal()">Cancelar</button>
      <button class="btn-confirm" (click)="saveNewTrip()">Crear Viaje</button>
    </div>
  </div>
</div>

<app-footer></app-footer>