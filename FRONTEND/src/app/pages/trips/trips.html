<app-navbar></app-navbar>

<div class="trips-container">
  
  <div class="trips-header">
    <div class="header-titles">
      <h1>Mis Viajes âœˆï¸</h1>
      <p>Gestiona tus prÃ³ximas aventuras y destinos</p>
    </div>
    <button class="btn-primary" (click)="openCreateModal()">
      + Nuevo Viaje
    </button>
  </div>

  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando tus viajes...</p>
  </div>

  <div class="trips-grid" *ngIf="!isLoading">
    
    <div *ngFor="let trip of trips" class="trip-card">
      <div class="trip-card-img" (click)="goToDetail(trip.id)" style="cursor: pointer;">
        <img [src]="'https://source.unsplash.com/featured/?'+trip.destination" alt="Destino">
      </div>
      
      <div class="trip-card-body">
        <h3>{{ trip.name }}</h3>
        <div class="trip-info">
          <span>ğŸ“ {{ trip.destination }}</span>
          <span>ğŸ“… {{ trip.startDate | date:'mediumDate' }}</span>
        </div>
      </div>

      <div class="trip-card-footer">
        <button class="btn-outline-small" (click)="goToDetail(trip.id)">Ver detalles</button>
      </div>
    </div>

    <div *ngIf="trips.length === 0 && !isLoading" class="empty-state">
      <p>AÃºn no has creado ningÃºn viaje. Â¡Empieza tu primera aventura!</p>
    </div>

  </div>
</div>

<div class="modal-overlay" *ngIf="showCreateModal" (click)="closeCreateModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeCreateModal()">âœ•</button>
    
    <div class="header-titles" style="margin-bottom: 20px;">
      <h2 style="color: var(--text-main);">Planear Nuevo Viaje ğŸŒ</h2>
    </div>
    
    <div class="form-group">
      <label style="color: var(--text-secondary); display: block; margin-bottom: 5px;">Nombre del Viaje *</label>
      <input type="text" [(ngModel)]="newTrip.name" class="custom-input" placeholder="Ej: Verano en Grecia">
    </div>

    <div style="display: flex; gap: 15px;">
      <div class="form-group" style="flex: 1;">
        <label style="color: var(--text-secondary); display: block; margin-bottom: 5px;">Destino *</label>
        <input type="text" [(ngModel)]="newTrip.destination" class="custom-input" placeholder="Ej: Atenas">
      </div>
    </div>

    <div style="display: flex; gap: 15px;">
      <div class="form-group" style="flex: 1;">
        <label style="color: var(--text-secondary); display: block; margin-bottom: 5px;">Fecha Inicio</label>
        <input type="date" [(ngModel)]="newTrip.startDate" class="custom-input">
      </div>
      <div class="form-group" style="flex: 1;">
        <label style="color: var(--text-secondary); display: block; margin-bottom: 5px;">Fecha Fin</label>
        <input type="date" [(ngModel)]="newTrip.endDate" class="custom-input">
      </div>
    </div>

    <div style="display: flex; gap: 15px; margin-top: 20px;">
      <button class="btn-outline-small" style="border-color: #ccc; color: #666;" (click)="closeCreateModal()">Cancelar</button>
      <button class="btn-primary" style="flex: 1;" (click)="saveNewTrip()">Crear Viaje</button>
    </div>
  </div>
</div>

<app-footer></app-footer>