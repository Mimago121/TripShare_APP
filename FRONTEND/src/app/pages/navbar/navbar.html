<nav class="navbar-container">
  <div class="navbar-content">
    
    <a routerLink="/home" class="brand">
      <span class="brand-text">Trip<span class="highlight">Share</span></span>
    </a>

    <div class="nav-links" *ngIf="isLoggedIn">
      <a routerLink="/home" routerLinkActive="active-link" [routerLinkActiveOptions]="{exact: true}">Inicio</a>
      <a routerLink="/trips" routerLinkActive="active-link">Mis Viajes</a>
      <a routerLink="/friends" routerLinkActive="active-link">Amigos</a>
    </div>

    <div class="nav-actions">
      
      <button class="icon-btn theme-btn" (click)="themeService.toggleTheme()">
        {{ themeService.currentTheme() === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™' }}
      </button>

      <ng-container *ngIf="!isLoggedIn">
        <button class="btn-login" routerLink="/login">Entrar</button>
        <button class="btn-register" routerLink="/register">Registrarse</button>
      </ng-container>

      <div class="user-controls" *ngIf="isLoggedIn">
        
        <button type="button" class="icon-btn notification-btn">
          ğŸ”” <span class="badge-dot"></span>
        </button>

        <div class="avatar-dropdown-wrapper">
          
          <button type="button" class="avatar-btn" (click)="toggleDropdown()">
            <img [src]="userAvatar" class="nav-avatar" alt="Perfil">
          </button>
          
          <div class="dropdown-menu fade-in" *ngIf="isDropdownOpen">
            <div class="dropdown-header">
              <span class="dropdown-name">{{ userName }}</span>
              <span class="dropdown-email">Viajero</span>
            </div>
            <hr>
            <a routerLink="/profile" (click)="closeDropdown()" class="dropdown-item">ğŸ‘¤ Mi Perfil</a>
            <a (click)="logout()" class="dropdown-item text-danger">ğŸšª Cerrar SesiÃ³n</a>
          </div>

        </div>

        <div class="overlay" *ngIf="isDropdownOpen" (click)="closeDropdown()"></div>

      </div>
    </div>
  </div>
</nav>